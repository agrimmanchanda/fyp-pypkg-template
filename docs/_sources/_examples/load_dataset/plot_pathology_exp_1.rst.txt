
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "_examples\load_dataset\plot_pathology_exp_1.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download__examples_load_dataset_plot_pathology_exp_1.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr__examples_load_dataset_plot_pathology_exp_1.py:


Experiment 1
========================================

Generating patient static profiles for patients using ``TidyWidget`` class.

.. GENERATED FROM PYTHON SOURCE LINES 8-66







.. code-block:: default
   :lineno-start: 8

    # Import
    import numpy as np
    import pandas as pd
    import seaborn as sns 
    import matplotlib.pyplot as plt
    import warnings
    warnings.filterwarnings("ignore")

    # DataBlend library
    from labimputer.utils.widgets import TidyWidget

    # ------------------------
    # Data handling 
    # ------------------------

    # Define FBC panel and interest biochemical markers
    FBC_CODES = sorted(["EOS", "MONO", "BASO", "NEUT", "RBC", "WBC", 
                    "MCHC", "MCV", "LY", "HCT", "RDW", "HGB", 
                    "MCH", "PLT", "MPV", "NRBCA"])

    # Define variables of interest for study
    INTEREST_cols = ["_uid","dateResult", "orderCode", "result", "unit", "unitRange"]

    # Define index and value parameters
    index = ['_uid', 'dateResult', 'orderCode']
    value = 'result'

    # Set relative data path and set FBC panel list
    path_data = '../resources/datasets/nhs/pathology-sample-march-may.csv'

    # Read data and drop Nan _uid records
    df = pd.read_csv(path_data, usecols=INTEREST_cols)

    # Reset index to remove the ones from the current data set
    df.reset_index(drop=True, inplace=True)

    # Drop any null values from the data set
    data = df.dropna()

    # --------------------
    # Transform
    # --------------------

    # Create widget
    widget = TidyWidget(index=index, value=value)

    # Transform (keep all)
    transform, duplicated = \
        widget.transform(data, report_duplicated=True)

    # Transform (keep first)
    transform_first = \
        widget.transform(data, keep='first')

    # Select features of interest from transformed data
    data_feat = transform[["_uid", "dateResult"] + FBC_CODES]

    # Save to csv file for use with subsequent experiments
    # data_feat.dropna().to_csv('../resources/datasets/nhs/pathology-sample-march-may-transformed.csv')

.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 2 minutes  9.164 seconds)


.. _sphx_glr_download__examples_load_dataset_plot_pathology_exp_1.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_pathology_exp_1.py <plot_pathology_exp_1.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_pathology_exp_1.ipynb <plot_pathology_exp_1.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
